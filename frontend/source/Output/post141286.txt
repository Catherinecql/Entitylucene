When waking from sleep, the wifi doesn't turn on <body> Sometimes, after waking from sleep my MacBook Pro's wifi appears to be "off" (there are no bars in the pie in the system tray, grey or black, or bouncing), but in fact when I click it I only have the option to turn it "off".  No networks are displayed, I cannot connect to the Internet with a browser or other tool.  If I select the option to turn off the wifi, the menu changes to "Turn Wi-Fi On".  If I then select to turn on wifi, the menu changes back to "Turn Wi-Fi Off", but no bars appear in the pie and no networks appear.  strongThings I've tried/strong  I've tried resetting my SMC and PRAM. Nothing.  Bluetooth is off.  I tried closing Dropbox (I read somewhere that it might affect wifi connectivity).  I tried forcing recompile of kernel extensions with  precodesudo touch /System/Library/Extensions /code/pre  I tried removing the wifi from preferred networks and re-adding it.  strongA few details/strong  I'm running Mavericks 10.9.4 on a Feb/Mar/early 2011 15" MacBook Pro upgraded to 16 GB ram and 750 GB Samsung SSD with the anti-glare display.  Note that sometimes the wifi comes back normally after sleeping.  Even after sleeping over night it may come on or it may not.  I'll continue to update this question with things I've tried and details until the issue is resolved.  strongUpdate/strong  Here's the log output of a time when this problem occurred.  For this output the Wi-fi status was "on" and the only option was to turn it "off" (opposite what I describe above, but otherwise similar in that the pie is empty).  I include a few lines of the log output of when the computer went to sleep so you can see that it did go to sleep and the time it woke up was 1:33pm.  There are a couple errors related to wifi... perhaps they can help diagnose.  pre 8/7/14 1:02:05.000 PM kernel[0]: hibernate_write_image done(0) 8/7/14 1:02:05.000 PM kernel[0]: sleep 8/7/14 1:02:05.000 PM kernel[0]: Vendor ID 0xffff is not validWake reason: EC.LidOpen (User) 8/7/14 1:02:05.556 PM configd[18]: [bootp_transmit.c:213] bootp_transmit(): bpf_write(en1) failed: Network is down (50) 8/7/14 1:02:05.556 PM configd[18]: DHCP en1: INIT transmit failed 8/7/14 1:02:05.558 PM configd[18]: arp_client_transmit(en1) failed, Network is down (50) 8/7/14 1:02:05.558 PM configd[18]: subnet_route: write routing socket failed, Network is unreachable 8/7/14 1:33:45.000 PM kernel[0]: AirPort_Brcm43xx::powerChange: System Wake - Full Wake/ Dark Wake / Maintenance wake 8/7/14 1:33:45.000 PM kernel[0]: Previous Sleep Cause: 5 8/7/14 1:33:45.000 PM kernel[0]: AppleThunderboltHAL::earlyWake - complete - took 1 milliseconds 8/7/14 1:33:45.000 PM kernel[0]: Thunderbolt Self-Reset Count = 0xedefbe00 8/7/14 1:33:45.000 PM kernel[0]: TBT W (1): 0 [x] 8/7/14 1:33:45.000 PM kernel[0]: WLAN adapter PCIE config space was not restored (stateNumber = 0) 8/7/14 1:33:45.000 PM kernel[0]: WLAN adapter PCIE config space was not restored (stateNumber = 2) 8/7/14 1:33:45.000 PM kernel[0]: wl_recover_nocard: Timer already started 8/7/14 1:33:45.291 PM WindowServer[109]: handle_will_sleep_auth_and_shield_windows: NULL shield_window (lock state: 1) 8/7/14 1:33:45.292 PM WindowServer[109]: CGXDisplayDidWakeNotification [6820520265208]: posting kCGSDisplayDidWake 8/7/14 1:33:51.986 PM configd[18]: subnet_route: write routing socket failed, Network is unreachable 8/7/14 1:33:52.255 PM CalendarAgent[178]: [com.apple.calendar.store.log.caldav.queue] [Got error on refresh, but not rectifying principal because it was manually configured: Error Domain=NSURLErrorDomain Code=-1009 "The Internet connection appears to be offline." UserInfo=0x7fa3bd16ebe0 {NSUnderlyingError=0x7fa3c0713340 "The Internet connection appears to be offline.", NSErrorFailingURLStringKey=https://jzwolak%40gmail.com@www.google.com/calendar/dav/jzwolak%40gmail.com/user/, NSErrorFailingURLKey=https://jzwolak%40gmail.com@www.google.com/calendar/dav/jzwolak%40gmail.com/user/, NSLocalizedDescription=The Internet connection appears to be offline.}] 8/7/14 1:33:52.258 PM CalendarAgent[178]: [com.apple.calendar.store.log.caldav.queue] [Account refresh failed with error: Error Domain=NSURLErrorDomain Code=-1009 "The Internet connection appears to be offline." UserInfo=0x7fa3bd03e3e0 {NSUnderlyingError=0x7fa3c0713340 "The Internet connection appears to be offline.", NSErrorFailingURLStringKey=https://jzwolak%40gmail.com@www.google.com/calendar/dav/jzwolak%40gmail.com/user/, NSErrorFailingURLKey=https://jzwolak%40gmail.com@www.google.com/calendar/dav/jzwolak%40gmail.com/user/, AccountName=jzwolak@gmail.com, CalDAVErrFromRefresh=YES, NSLocalizedDescription=The Internet connection appears to be offline.}] 8/7/14 1:33:52.260 PM CalendarAgent[178]: [com.apple.calendar.store.log.caldav.queue] [Adding [] to failed operations.] 8/7/14 1:33:52.662 PM CalendarAgent[178]: [com.apple.calendar.store.log.caldav.queue] [Account refresh failed with error: Error Domain=NSURLErrorDomain Code=-1009 "The Internet connection appears to be offline." UserInfo=0x7fa3c021f470 {NSUnderlyingError=0x7fa3bb449b40 "The Internet connection appears to be offline.", NSErrorFailingURLStringKey=https://jzwolak%40vt.edu@p01-caldav.icloud.com/73959726/principal/, NSErrorFailingURLKey=https://jzwolak%40vt.edu@p01-caldav.icloud.com/73959726/principal/, AccountName=iCloud, CalDAVErrFromRefresh=YES, NSLocalizedDescription=The Internet connection appears to be offline.}] 8/7/14 1:33:52.664 PM CalendarAgent[178]: [com.apple.calendar.store.log.caldav.queue] [Adding [] to failed operations.] 8/7/14 1:34:02.859 PM AddressBookSourceSync[1863]: [CardDAVPlugin-ERROR] -getPrincipalInfo:[_controller supportsRequestCompressionAtURL:https://jzwolak%40vt.edu@p01-contacts.icloud.com/73959726/principal/] Error Domain=NSURLErrorDomain Code=-1009 "The Internet connection appears to be offline." UserInfo=0x7fa1e5c2bb50 {NSUnderlyingError=0x7fa1e5b49a60 "The Internet connection appears to be offline.", NSErrorFailingURLStringKey=https://jzwolak%40vt.edu@p01-contacts.icloud.com/73959726/principal/, NSErrorFailingURLKey=https://jzwolak%40vt.edu@p01-contacts.icloud.com/73959726/principal/, NSLocalizedDescription=The Internet connection appears to be offline.} 8/7/14 1:34:02.859 PM AddressBookSourceSync[1863]: [CardDAVPlugin-ERROR] -getPrincipalInfo:[_controller supportsRequestCompressionAtURL:https://jzwolak%40gmail.com@google.com/carddav/v1/principals/jzwolak%40gmail.com/] Error Domain=NSURLErrorDomain Code=-1009 "The Internet connection appears to be offline." UserInfo=0x7fa1e5a35790 {NSUnderlyingError=0x7fa1e5b449a0 "The Internet connection appears to be offline.", NSErrorFailingURLStringKey=https://jzwolak%40gmail.com@google.com/carddav/v1/principals/jzwolak%40gmail.com/, NSErrorFailingURLKey=https://jzwolak%40gmail.com@google.com/carddav/v1/principals/jzwolak%40gmail.com/, NSLocalizedDescription=The Internet connection appears to be offline.} 8/7/14 1:34:49.804 PM Console[1867]: setPresentationOptions called with NSApplicationPresentationFullScreen when there is no visible fullscreen window; this call will be ignored. 8/7/14 1:34:49.861 PM com.apple.SecurityServer[15]: Session 100020 created 8/7/14 1:34:50.483 PM com.apple.IconServicesAgent[231]: main Failed to composit image for binding VariantBinding [0x393] flags: 0x8 binding: FileInfoBinding [0x4dd] - extension: gif, UTI: com.compuserve.gif, fileType: ????. 8/7/14 1:34:50.484 PM quicklookd[1865]: Warning: Cache image returned by the server has size range covering all valid image sizes. Binding: VariantBinding [0x403] flags: 0x8 binding: FileInfoBinding [0x303] - extension: gif, UTI: com.compuserve.gif, fileType: ???? request size:16 scale: 1 8/7/14 1:34:50.510 PM com.apple.IconServicesAgent[231]: main Failed to composit image for binding VariantBinding [0x10b] flags: 0x8 binding: FileInfoBinding [0x2f1] - extension: png, UTI: public.png, fileType: ????. 8/7/14 1:34:50.510 PM quicklookd[1865]: Warning: Cache image returned by the server has size range covering all valid image sizes. Binding: VariantBinding [0x603] flags: 0x8 binding: FileInfoBinding [0x503] - extension: png, UTI: public.png, fileType: ???? request size:128 scale: 1 /pre  strongUpdate 2/strong  A shorter log from the latest failure... offers two more bits of information: the BBSID change and a strange reference to wake reason "LidOpen" at 4:39pm and I did not open the lid.  That was after the computer went to sleep from me closing the lid.  I opened the lid next at 5:23.  pre 8/8/14 4:39:48.000 PM kernel[0]: SMC::smcHandleInterruptEvent WARNING status=0x0 (0x40 not set) notif=0x0 8/8/14 4:39:48.000 PM kernel[0]: Wake reason: EC.LidOpen (User) 8/8/14 5:23:17.000 PM kernel[0]: AirPort_Brcm43xx::powerChange: System Wake - Full Wake/ Dark Wake / Maintenance wake 8/8/14 5:23:17.000 PM kernel[0]: Previous Sleep Cause: 5 8/8/14 5:23:17.000 PM kernel[0]: AppleThunderboltHAL::earlyWake - complete - took 1 milliseconds 8/8/14 5:23:17.000 PM kernel[0]: Thunderbolt Self-Reset Count = 0xedefbe00 8/8/14 5:23:17.000 PM kernel[0]: TBT W (1): 0 [x] 8/8/14 5:23:17.000 PM kernel[0]: WLAN adapter PCIE config space was not restored (stateNumber = 0) 8/8/14 5:23:17.000 PM kernel[0]: en1: BSSID changed to 30:85:a9:6b:37:09 8/8/14 5:23:17.000 PM kernel[0]: WLAN adapter PCIE config space was not restored (stateNumber = 2) 8/8/14 5:23:24.000 PM kernel[0]: en1: BSSID changed to 30:85:a9:6b:37:09 /pre  strongUpdate 3/strong  Today, for the first time ever, I woke my computer from sleep and the pie was greyed out (not empty, but not with wifi bars) with an "X".  I never saw this before.  When I clicked on it the text read something like:     No Wifi hardware installed   What!?  So the Wifi hardware is the builtin hardware that came with the Mac.  This leads me to think I have a hardware problem or a loose connection.  I had the main board and display replaced under warranty in the past 1.5 years and both those would require disconnecting at least the antenna for the wifi but maybe the card if it is somehow separate.  I also saw someone remove the wi-fi from the network preferences and re-add it as a solution to precisely this problem.  strongUpdate 4/strong  I've noticed that the wifi fails on wake from sleep when the lid to the computer is closed, sometimes.  But if I use the power button to sleep or wait for energy saver preference of however many minutes to timeout then the computer wakes fine and the wifi works.  I'm increasingly thinking there's a hardware problem.  <comment166496> If you know how, publish some 30 lines of Console log, so we can see what is it doing after opening the lid (use the time stamp as guide) <comment166497> I'll do that next time it occurs.  Thanks for the suggestion! <comment166628> Done, I added log output. <comment166741> It is messed up, probably the best would be to reinstall the OS. What is the WLAN adapter PCIE doing there? do you have one ? then because of it it changes the BSSID to which one ? is it yours ? <comment167196> I have no external devices connected to the laptop. en1 is my wifi (airport). The BSSID of my wireless router is not 30:85:... it's 74:31:... <comment167214> Probably easiest is to reinstall the OS, or if you prefer is to clear all your wifi networks (delete) and start over. Why is it detecting something else sometimes? I do not know! <comment167222> I'm hesitant to reinstall the OS, that's a lot of down time for my computer and I need it for work.  I will do it after I've exhausted other options.  I've still got options... my best bet currently is checking for a loose connection inside the hardware. <comment169080> I am still debugging this and I've tried so many things.  I keep thinking it's a hardware thing and in particular a loose connection (like a cable).  I think that in part because I've had the logic board and the display replaced.  So today, I opened the computer, put a little pressure on all the Wifi cables (the 4 antenna cables and both ends of the ribbon cable), and unplugged the ribbon cable from the logic board and reinserted.  Today, I have not seen the problem after doing this and I currently have been having the problem after _every_ wake from sleep.  I'll post an update in a week. <comment170100> So it did not keep working and in fact completely died at the end of the that day (from comment above).  I ordered a used, presumably working, wifi card and new ribbon cable.  I received them today, replaced, and things are working again.  So it does seem to be a bad card or cable.  Normally I would not think the cable bad except that it seems like a delicate cable and had a small bend in it near the connection.  I didn't want to wait for a second shipment if the new card didn't get wifi working.  I replaced both simultaneously, so I don't know which was bad, but my wifi works!!! <comment170106> congrats should we say. <comment170242> Thanks, @Buscarì›ƒ.  And thanks for all your help!